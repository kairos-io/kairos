# Additional common packages to be added to all the FLAVORS
## common:
##  - category/name@version
#
# Apply arbitrary images (e.g. to stub a package to a specific version)
# These are applyied after the packages.
# images:
#   - quay.io/kairos/packages:k9s-utils-0.27.4
flavors:
  debian:
    - common-packages
    - kairos-toolchain
    - systemd-base
  debian-arm-rpi:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu-arm-rpi:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu-20-lts-arm-nvidia-jetson-agx-orin:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu-20-lts-arm-rpi:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu-22-lts-arm-rpi:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu-22-lts:
    - common-packages
    - kairos-toolchain
    - systemd-base
  ubuntu-20-lts:
    - common-packages
    - kairos-toolchain
    - systemd-base
  fips-systemd:
    - common-packages
    - kairos-toolchain-fips
    - systemd-base
  fedora:
    - common-packages
    - kairos-toolchain
    - systemd-base
  rockylinux:
    - common-packages
    - kairos-toolchain
    - systemd-base
  almalinux:
    - common-packages
    - kairos-toolchain
    - systemd-base
  opensuse-tumbleweed:
    - common-packages
    - kairos-toolchain
    - systemd-base
    - systemd-latest
  opensuse-tumbleweed-arm-rpi:
    - common-packages
    - kairos-toolchain
    - systemd-base
  opensuse-leap:
    - common-packages
    - kairos-toolchain
    - systemd-base
  opensuse-leap-arm-rpi:
    - common-packages
    - kairos-toolchain
    - systemd-base
  alpine:
    - common-packages
    - kairos-toolchain
    - openrc
    - alpine-init
  alpine-arm-rpi:
    - common-packages
    - kairos-toolchain
    - openrc
    - alpine-init-rpi
# See https://github.com/kairos-io/packages/pull/67 for rationale
alpine-init:
  packages:
    - distro-kernel/alpine
alpine-init-rpi:
  packages:
    - distro-kernel/alpine-rpi
openrc:
  packages:
    - init-svc/openrc
systemd-base:
  packages:
    - init-svc/systemd
    - dracut/kairos-network
    - dracut/kairos-sysext
opensuse-leap-kernel:
  packages:
    - distro-kernels/opensuse-leap
    - distro-initrd/opensuse-leap
## Packages (cat/name@version) that are added to ALL flavors
## Static files, no binary
common-packages:
  packages:
    - static/grub-config
    - dracut/immucore
    - system/suc-upgrade
    - system/grub2-efi
    - static/kairos-overlay-files
kairos-toolchain-fips:
  packages:
    - fips/kcrypt
    - fips/kcrypt-challenger
    - fips/immucore
    - fips/kairos-agent
kairos-toolchain-fips-static:
  packages:
    - fips-static/kcrypt
    - fips-static/kcrypt-challenger
    - fips-static/immucore
    - fips-static/kairos-agent
kairos-toolchain:
  packages:
    - system/kcrypt
    - system/kcrypt-challenger
    - system/immucore
    - system/kairos-agent
ubuntu-kernel:
  packages:
    - distro-kernels/ubuntu
    - distro-initrd/ubuntu
repositories:
  - &kairos
    name: "kairos"
    # https://github.com/kairos-io/packages
    description: "kairos repository"
    type: "docker"
    arch: amd64
    cached: true
    priority: 2
    urls:
      - "quay.io/kairos/packages"
    reference: 20231018075943-repository.yaml
  - !!merge <<: *kairos
    arch: arm64
    urls:
      - "quay.io/kairos/packages-arm64"
    reference: 20231018075844-repository.yaml
